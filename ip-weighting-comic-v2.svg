<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="xkcd-script" font-size="24" font-weight="bold">IP Weighting Explained</text>
  
  <!-- First Panel -->
  <g transform="translate(50, 80)">
    <!-- Reality box -->
    <rect x="0" y="0" width="200" height="200" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" style="stroke-dasharray: 5,5"/>
    <text x="100" y="-10" text-anchor="middle" font-family="xkcd-script" font-size="16">Reality</text>
    
    <!-- Stick figures -->
    <g transform="translate(40, 50)">
      <!-- Sick person -->
      <circle cx="0" cy="0" r="10" fill="none" stroke="black" stroke-width="2"/>
      <line x1="0" y1="10" x2="0" y2="40" stroke="black" stroke-width="2"/>
      <line x1="-20" y1="25" x2="20" y2="25" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="-10" y2="70" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="10" y2="70" stroke="black" stroke-width="2"/>
      <!-- Medical Cross -->
      <g transform="translate(-25, 15)">
        <circle cx="0" cy="0" r="8" fill="white" stroke="black" stroke-width="2"/>
        <line x1="-5" y1="0" x2="5" y2="0" stroke="red" stroke-width="2"/>
        <line x1="0" y1="-5" x2="0" y2="5" stroke="red" stroke-width="2"/>
      </g>
      <!-- Sick squiggles -->
      <path d="M-15,-10 Q-10,-15 -5,-10 T 5,-10" fill="none" stroke="black" stroke-width="1"/>
    </g>
    
    <g transform="translate(140, 50)">
      <!-- Healthy person -->
      <circle cx="0" cy="0" r="10" fill="none" stroke="black" stroke-width="2"/>
      <line x1="0" y1="10" x2="0" y2="40" stroke="black" stroke-width="2"/>
      <line x1="-20" y1="25" x2="20" y2="25" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="-10" y2="70" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="10" y2="70" stroke="black" stroke-width="2"/>
    </g>
    
    <text x="40" y="140" text-anchor="middle" font-family="xkcd-script" font-size="12">"80% chance"</text>
    <text x="140" y="140" text-anchor="middle" font-family="xkcd-script" font-size="12">"20% chance"</text>
  </g>
  
  <!-- Arrow -->
  <g transform="translate(300, 180)">
    <line x1="0" y1="0" x2="50" y2="0" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="25" y="-10" text-anchor="middle" font-family="xkcd-script" font-size="16">IP Weighting</text>
  </g>
  
  <!-- Define arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>
  
  <!-- Second Panel -->
  <g transform="translate(400, 80)">
    <!-- Balanced world box -->
    <rect x="0" y="0" width="350" height="200" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" style="stroke-dasharray: 5,5"/>
    <text x="175" y="-10" text-anchor="middle" font-family="xkcd-script" font-size="16">After IP Weighting</text>
    
    <!-- Multiple copies of rare case -->
    <g transform="translate(280, 50)">
      <!-- Healthy person with medicine (rare) -->
      <circle cx="0" cy="0" r="10" fill="none" stroke="black" stroke-width="2"/>
      <line x1="0" y1="10" x2="0" y2="40" stroke="black" stroke-width="2"/>
      <line x1="-20" y1="25" x2="20" y2="25" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="-10" y2="70" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="10" y2="70" stroke="black" stroke-width="2"/>
      <!-- Medical Cross -->
      <g transform="translate(-25, 15)">
        <circle cx="0" cy="0" r="8" fill="white" stroke="black" stroke-width="2"/>
        <line x1="-5" y1="0" x2="5" y2="0" stroke="red" stroke-width="2"/>
        <line x1="0" y1="-5" x2="0" y2="5" stroke="red" stroke-width="2"/>
      </g>
    </g>
    
    <!-- Copy 1 (faded) -->
    <g transform="translate(240, 50)" opacity="0.3">
      <circle cx="0" cy="0" r="10" fill="none" stroke="black" stroke-width="2"/>
      <line x1="0" y1="10" x2="0" y2="40" stroke="black" stroke-width="2"/>
      <line x1="-20" y1="25" x2="20" y2="25" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="-10" y2="70" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="10" y2="70" stroke="black" stroke-width="2"/>
      <!-- Medical Cross -->
      <g transform="translate(-25, 15)">
        <circle cx="0" cy="0" r="8" fill="white" stroke="black" stroke-width="2"/>
        <line x1="-5" y1="0" x2="5" y2="0" stroke="red" stroke-width="2"/>
        <line x1="0" y1="-5" x2="0" y2="5" stroke="red" stroke-width="2"/>
      </g>
    </g>
    
    <!-- Copy 2 (more faded) -->
    <g transform="translate(200, 50)" opacity="0.15">
      <circle cx="0" cy="0" r="10" fill="none" stroke="black" stroke-width="2"/>
      <line x1="0" y1="10" x2="0" y2="40" stroke="black" stroke-width="2"/>
      <line x1="-20" y1="25" x2="20" y2="25" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="-10" y2="70" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="10" y2="70" stroke="black" stroke-width="2"/>
      <!-- Medical Cross -->
      <g transform="translate(-25, 15)">
        <circle cx="0" cy="0" r="8" fill="white" stroke="black" stroke-width="2"/>
        <line x1="-5" y1="0" x2="5" y2="0" stroke="red" stroke-width="2"/>
        <line x1="0" y1="-5" x2="0" y2="5" stroke="red" stroke-width="2"/>
      </g>
    </g>
    
    <!-- Weight labels -->
    <text x="280" y="140" text-anchor="middle" font-family="xkcd-script" font-size="12">Weight = 5</text>
    <text x="40" y="140" text-anchor="middle" font-family="xkcd-script" font-size="12">Weight = 1.25</text>
    
    <!-- Sick person (common case) -->
    <g transform="translate(40, 50)">
      <circle cx="0" cy="0" r="10" fill="none" stroke="black" stroke-width="2"/>
      <line x1="0" y1="10" x2="0" y2="40" stroke="black" stroke-width="2"/>
      <line x1="-20" y1="25" x2="20" y2="25" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="-10" y2="70" stroke="black" stroke-width="2"/>
      <line x1="0" y1="40" x2="10" y2="70" stroke="black" stroke-width="2"/>
      <!-- Medical Cross -->
      <g transform="translate(-25, 15)">
        <circle cx="0" cy="0" r="8" fill="white" stroke="black" stroke-width="2"/>
        <line x1="-5" y1="0" x2="5" y2="0" stroke="red" stroke-width="2"/>
        <line x1="0" y1="-5" x2="0" y2="5" stroke="red" stroke-width="2"/>
      </g>
      <path d="M-15,-10 Q-10,-15 -5,-10 T 5,-10" fill="none" stroke="black" stroke-width="1"/>
    </g>
  </g>
  
  <!-- Caption -->
  <text x="400" y="350" text-anchor="middle" font-family="xkcd-script" font-size="14" font-style="italic">
    "When reality is unfair, just copy-paste until it looks random!"
  </text>
  <text x="400" y="370" text-anchor="middle" font-family="xkcd-script" font-size="12" font-style="italic">
    - Every Causal Inference Researcher
  </text>
</svg>
